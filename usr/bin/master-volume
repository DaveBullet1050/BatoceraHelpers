#!/bin/bash

# Sets the master volume for the intel hardware audio device (hw:0).
# Usage:
# +/-<number> - increase (or decrease) the master volume by <number> % = eg. +7 to increase by 7%
# <number> - set the master volume to that absolute %, eg. 80 for 80%

curr_volume=`amixer -D hw:0 get 'Master' | grep 'Mono:' | sed -n 's/.*\[\(.*\)\%.*/\1/p'`

vol_diff=${1:1}

if [[ ${1:0:1} = '+' ]]
then
	new_volume=$((curr_volume + vol_diff))

elif [[ ${1:0:1} = '-' ]]
then
	new_volume=$((curr_volume - vol_diff))

else
	new_volume=$1

fi

if [[ $new_volume -le 0 ]]
then
	new_volume=0
fi
if [[ $new_volume -gt 100 ]]
then
	new_volume=100
fi

amixer -D hw:0 set 'Master' $new_volume%
